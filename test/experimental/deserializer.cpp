
#include <gtest/gtest.h>

#include "experimental/serializer/deserializer.h"
#include "experimental/game/chat/chatmessagecommand.h"

using namespace openao::experimental::serializer;
using namespace openao::experimental::game::chat;

TEST(Deserializer, Base) {

  Deserializer deserializer;
  deserializer.insert<ChatMessageCommand>(23);

  uint8_t data[] = {
          0x17, 0x00, 0x01, 0x00, 0x00, 0x00, 0x6f, 0x70, 0x65, 0x6e, 0x61,
          0x6f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
          0x00, 0x74, 0x68, 0x69, 0x73, 0x20, 0x69, 0x73, 0x20, 0x65, 0x78,
          0x70, 0x65, 0x72, 0x69, 0x6d, 0x65, 0x6e, 0x74, 0x61, 0x6c, 0x00,
          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
          0x00, 0x00, 0x00, 0x00,
  };

  BinaryBuffer buffer;
  buffer.write((char*)data, sizeof(data));

  //deserializer.deserialize(buffer);
}